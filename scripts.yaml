# Velociraptor is a script runner for Deno: https://velociraptor.run/docs/installation/

scripts:
  test: deno test -A --ignore="vendor,npm"

  test-watch: deno test -A --watch --unstable --ignore="vendor,npm"

  lint: deno lint --ignore="vendor,npm"

  fmt: deno fmt --ignore="vendor,npm"

  build-npm: deno run -A build_npm.ts

  vendor:
    - rm -rf vendor
    - deno vendor mod.ts test_deps.ts deps.ts

  gen-cov:
    - rm -rf .cov_profile
    - deno test --ignore="vendor,npm" --coverage=.cov_profile -A
    - deno coverage .cov_profile --lcov > .cov_profile/cov_profile.lcov
    - genhtml -o .cov_profile/html .cov_profile/cov_profile.lcov

  pre-commit:
    - deno fmt --ignore="vendor,npm" --check
    - deno lint --ignore="vendor,npm"
    - deno test -A --ignore="vendor,npm" --no-check
